<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Thống Kê</title>
    <th:block th:replace="layout::cssAll"></th:block>
    <link type="text/css" rel="stylesheet" th:href="@{/css/Chart.min.css}"/>
</head>
<body>
<header th:replace="layout::topBar"></header>
<main role="main" class="container main-contain">
    <div class="container-fluid h-auto inside">
        <div class="row">
            <h1>Thống Kê</h1>
        </div>
        <div class="row">
            <div class="col-12 form-group">
                <label for="statistical_type">Thống Kê</label>
                <select class="custom-select select_search" id="statistical_type">
                    <option value="bySymptomAmount">Số Người Có Cùng Số Lượng Triệu Chứng</option>
                    <option value="bySymptomType">Số Người Mắc Triệu Chứng</option>
                    <option value="byExposureAmount">Từng Tiếp Xúc Với Cùng Số Nguồn Bệnh</option>
                    <option value="byExposureType">Số Người Từng Tiếp Xúc Với Loại Nguồn Bệnh</option>
                    <option value="byEntry">Số Người Nhập Cảnh Theo Ngày</option>
                </select>
            </div>
        </div>
        <form id="formStatistical">
            <div class="row">
                <div class="col-sm-6 col-lg-5 form-group">
                    <label for="beginDate">Từ Ngày</label>
                    <input type="date" class="form-control" id="beginDate">
                </div>
                <div class="col-sm-6 col-lg-5 form-group">
                    <label for="endDate">Từ Ngày</label>
                    <input type="date" class="form-control" id="endDate">
                </div>
                <div class="col-12 col-lg-2 form-group">
                    <button type="button" class="btn btn-primary" onclick="draw()">Thống Kê</button>
                </div>
            </div>
        </form>
        <div class="row" id="locationOfChart">
            <canvas id="statisticalChart" width="100%" height="40"></canvas>

        </div>
    </div>
</main>
<footer th:replace="layout::bottomBar"></footer>
<th:block th:replace="layout::jsAll"></th:block>
<script th:src="@{/js/chart/Chart.js}"></script>
<script th:src="@{/js/web/statistical.js}"></script>
<script>
    $(document).ready(
        function () {
            $(".select_search").select2();
            statistical.setValidate();
        }
    );
    function draw() {
        if ($("#formStatistical").valid()){
            var typeStatical = $("#statistical_type").val();
            switch (typeStatical) {
                case "bySymptomAmount":
                    statistical.getSymptom();
                    break;
                case "bySymptomType":
                    statistical.getByTypeSymptom();
                    break;
                case "byExposureAmount":
                    statistical.getExposure();
                    break;
                case "byExposureType":
                    statistical.getByTypeExposure();
                    break;
                case "byEntry":
                    statistical.getEntry();
                    break;
            }
        }

    }
    // $("#statistical_type").change(
    //     function () {
    //         draw();
    //     }
    // );
</script>
</body>
</html>